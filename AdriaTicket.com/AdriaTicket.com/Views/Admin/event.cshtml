<script src="https://www.youtube.com/iframe_api"></script>

<div ng-controller="AdminEventEditController">
    @{
        ViewBag.Title = "CMS Adria Ticket - Događaji";
        ViewBag.Header = "CMS Adria Ticket - Događaji";
    }
    <form name="eventForm">
        <fieldset>
        <div class ="container addEditEvent-container">
            <div class ="row admin-row header-row">
                <div class ="col-sm-12">
                    {{addEditEvent}}
                </div>
            </div>
            <div class ="row admin-row">
             <div class ="col-xs-12 col-sm-12">
                    <a href ="/admin/events">
                      <button class="form-control btn btn-warning" type="button">
                        <i class="glyphicon glyphicon-remove"></i>
                        Odustani
                      </button>
                  </a>
                </div>
             </div>
            <div class ="row admin-row">
            <div class ="col-xs-12 col-sm-4">
                <div class="form-group">
                    <div class ="row addeditevent-row">
                    <label for="nazivEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Naslov</label>
                    <div class="col-xs-12 col-sm-12">
                        <input type="text" class="form-control" id="nazivEventa" placeholder="Naslov događaja" ng-model="event.EVE_Naziv">
                    </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class ="row addeditevent-row">
                    <label for="datumEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Datum događaja</label>
                        <div class="col-xs-12 col-sm-12">                 
                            <div class="dropdown">
                              <a class="dropdown-toggle" id="datumEventa" role="button" data-toggle="dropdown" data-target="#" href="#">
                                <div class="input-group"><input type="text" id ="datumEventaInput" class="form-control" ng-model="event.EVE_Datum" placeholder="Datum događaja"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                </div>
                              </a>
                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker ng-model="data.dateDropDownInput" data-datetimepicker-config="{ dropdownSelector: '#datumEventaInput' }" data-on-set-time="datmEventaChange(newDate,oldDate)"/>
                              </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class ="row addeditevent-row">
                    <label for="predProdajaKarataInput" class="control-label col-xs-12 col-sm-12 addeditlabel">Datum pretprodaje karata</label>
                        <div class="col-xs-12 col-sm-12">                 
                            <div class="dropdown">
                              <a class="dropdown-toggle" id="predProdajaKarataDatum" role="button" data-toggle="dropdown" data-target="#" href="#">
                                <div class="input-group"><input type="text" id ="predProdajaKarataInput" class="form-control" ng-model="event.EVE_DatumOdPretprodaja" placeholder="Datum pretprodaje karata"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                </div>
                              </a>
                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker ng-model="data.dateDropDownInput" data-datetimepicker-config="{ dropdownSelector: '#predProdajaKarataInput' }" data-on-set-time="pretprodajaKarataChange(newDate,oldDate)"/>
                              </ul>
                            </div>
                        </div>
                        </div>
                </div>

                <div class="form-group">
                    <div class ="row addeditevent-row">
                    <label for="prodajaKarataInput" class="control-label col-xs-12 col-sm-12 addeditlabel">Datum prodaje karata</label>
                        <div class="col-xs-12 col-sm-12">                 
                            <div class="dropdown">
                              <a class="dropdown-toggle" id="prodajaKarataDatum" role="button" data-toggle="dropdown" data-target="#" href="#">
                                <div class="input-group"><input type="text" id ="prodajaKarataInput" class="form-control" ng-model="event.EVE_DatumOdProdaja" placeholder="Datum prodaje karata"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                </div>
                              </a>
                              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker ng-model="data.dateDropDownInput" data-datetimepicker-config="{ dropdownSelector: '#prodajaKarataDatum' }" data-on-set-time="prodajaKarataChange(newDate,oldDate)"/>
                              </ul>
                            </div>
                        </div>
                        </div>
                </div>

            <div class="form-group">
                <div class ="row addeditevent-row">
                <label for="galerija" class="control-label col-xs-12 col-sm-12 addeditlabel">Galerija slika</label>
                    <div class="col-xs-12 col-sm-12">
                        <select  class="form-control" id="galerija" placeholder="galerija slika" ng-model="event.ImageGalleriesID">
                            <option ng-repeat="g in galleries" value="{{g.Id}}" ng-selected ="{{g.Id == event.ImageGalleriesID}}">{{g.NazivGalerije}}</option>
                        </select>
                    </div>
                    </div>
            </div>

            <div class="form-group">
                <div class ="row addeditevent-row">
                <label for="videoLink" class="control-label col-xs-12 col-sm-12 addeditlabel">Video</label>
                    <div class="col-xs-12 col-sm-12">
                        <input type="text" class="form-control" id="videoLink" placeholder="YouTube video" ng-model="event.videoLink">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class ="row addeditevent-row">
                <label for="organizatorEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Organizator</label>
                    <div class="col-xs-12 col-sm-12">
                        <select  class="form-control" id="organizatorEventa" placeholder="naziv događanja" ng-model="event.ORG_Id">
                            <option ng-repeat="o in eventOrganisers" value="{{o.ORG_Id}}" ng-selected ="{{o.ORG_Id==event.ORG_Id}}">{{o.ORG_Naziv}}</option>
                        </select>
                    </div>
                    </div>
            </div>
                <div class="form-group">
                    <div class ="row addeditevent-row">
                    <label for="postotakProvizijeEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Postotak provizije</label>
                        <div class="col-xs-12 col-sm-12">
                            <input type="number" lang="nb" step="0.01" max="100" class="form-control" id="postotakProvizijeEventa" placeholder="Postotak provizije" ng-model="event.EVE_PostotakProvizije">
                    </div>
                        </div>
                </div>
            
            <div class="form-group">
                <div class ="row addeditevent-row">
                <label for="mjestoEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Grad</label>
                    <div class="col-xs-12 col-sm-12">
                        <select  class="form-control" id="mjestoEventa" ng-model="event.MjestoId">
                            <option ng-repeat="t in eventTowns" value="{{t.MJE_Id}}" ng-selected ="{{t.MJE_Id == event.MjestoId}}">{{t.MJE_Naziv}}</option>
                        </select>
                    </div>
                    </div>
            </div>
            <div class="form-group">
                <div class ="row addeditevent-row">
                <label for="lokacijaEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Lokacija</label>
                    <div class="col-xs-12 col-sm-12">
                        <select  class="form-control" id="lokacijaEventa" ng-model="event.EVE_DvoranaId">
                            <option ng-repeat="l in eventLocations" value="{{l.DVO_Id}}" ng-selected ="{{l.DVO_Id == event.EVE_DvoranaId}}">{{l.DVO_Naziv}}</option>
                        </select>
                    </div>
                    </div>
            </div>
                <div class="form-group">
                    <div class ="row addeditevent-row">
                <label for="statusEventa" class="control-label col-xs-12 col-sm-12 addeditlabel">Status</label>
                    <div class="col-xs-12 col-sm-12">
                        <select  class="form-control" id="statusEventa" ng-model="event.EVE_StatusEventaId">
                            <option ng-repeat="s in eventStatus" value="{{s.SEV_Id}}" ng-selected ="s.SEV_Id==event.EVE_StatusEventaId">{{s.SEV_Naziv}}</option>
                        </select>
                    </div>
                    </div>
            </div>
                <div class="form-group">
                <div class ="row addeditevent-row">
                
                    <div class="col-xs-12 col-sm-12">
                        <div class="checkbox">
                          <label><input type="checkbox" ng-checked="{{event.EVE_PrikaziNaWebu}}" ng-model="event.EVE_PrikaziNaWebu"><label for="prikazEventa" class="control-label addeditlabel">Prikaži na stranici</label></label>
                        </div>
                    </div>
                    </div>
            </div>

        </div>
            
        <div class="col-xs-12 col-sm-8" />

            <div class="form-group">
                <div class ="row addeditevent-row">
                <div class="col-xs-12 col-sm-12">
                    <button type="file" class ="col-xs-12 col-sm-12 btn btn-info btn-sm"
                    ngf-select ng-model="files" 
                    ng-model-rejected="rejFiles"  
                    ngf-multiple="false" 
                    accept="image/*" 
                    ngf-accept="'image/*'" >
                    <i class="glyphicon glyphicon-picture"></i>    
                        Odaberi sliku događaja
                    </button>
                </div>
                </div>
                <div ng-if="event.EVE_ImagePath" class ="row addeditevent-row">
                <div class="col-xs-12 col-sm-12">
                    <button class="col-xs-12 col-sm-12 btn btn-danger btn-sm" type="button" ng-click="deleteImage()">
                        <i class="glyphicon glyphicon-remove"></i>
                        Obriši sliku
                    </button>
                </div>
                </div>
            </div>
            <div ng-if="event.EVE_ImagePath" class="form-group">
                <div class ="row addeditevent-row">
                <div class ="col-xs-12 col-sm-12 admin-event-img-video">
                    <img class="col-sm-12" src= {{"/uploads/"+event.EVE_ImagePath}} />
                </div>
                </div>
            </div>
            <hr />

         
           <div class ="row addeditevent-row">
                    <label for="description" class="control-label col-xs-12 col-sm-12 addeditlabel">Opis</label>
           </div>
                <div class ="row addeditevent-row">
                    <textarea ui-tinymce="tinymceOptions" ng-model="event.EVE_Opis"></textarea>
                </div>

            <hr/>

            <div ng-if="event.videoLink" class ="row addeditevent-row">
                <label for="description" class="control-label col-xs-12 col-sm-12 addeditlabel">Odabran video</label>
            </div>

            <div ng-if="event.videoLink" class ="row">
                <div class ="col-xs-12 col-sm-12 admin-event-img-video">
                    <youtube-video video-id="event.videoLink"></youtube-video>
                </div>
            </div>


            </div>
            
         </div>

            <div class ="row">
                <div class ="form-group col-xs-12 col-sm-12">
                    <button type="submit" class="form-control btn btn-success" ng-disabled="disabledFlag" ng-click="save(event)">
                        <i class="glyphicon glyphicon-ok"></i>
                        {{saveUpdate}}                         
                    </button>
                </div>
            </div>
        </div>    
        </fieldset>
    </form>

</div>